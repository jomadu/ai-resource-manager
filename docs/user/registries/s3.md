# S3 Registry

Use AWS S3 buckets for ARM rulesets.

## Setup

```ini
[sources.s3]
type = s3
bucket = my-arm-registry
region = us-east-1
prefix = packages/
accessKey = $AWS_ACCESS_KEY_ID
secretKey = $AWS_SECRET_ACCESS_KEY
```

```bash
export AWS_ACCESS_KEY_ID="AKIAIOSFODNN7EXAMPLE"
export AWS_SECRET_ACCESS_KEY="wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"
```

## Publishing

```bash
# Create package
tar -czf package.tar.gz -C rules/ .

# Upload
aws s3 cp package.tar.gz s3://my-arm-registry/packages/ruleset-name/1.0.0/package.tar.gz
```

## Version Discovery

Create `versions.json`:
```json
{
  "versions": ["1.0.0", "1.1.0"],
  "latest": "1.1.0"
}
```

## IAM Permissions

```json
{
  "Version": "2012-10-17",
  "Statement": [{
    "Effect": "Allow",
    "Action": ["s3:GetObject", "s3:ListBucket"],
    "Resource": ["arn:aws:s3:::my-arm-registry/*"]
  }]
}
```

## Troubleshooting

- **Access Denied**: Check IAM permissions
- **Region Mismatch**: Verify bucket region
